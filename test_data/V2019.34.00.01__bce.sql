-- T A B L E S P A C E
--
--
--
CREATE TABLESPACE DPSTS820
    IN ${DBNAME}
    USING STOGROUP ${STOGROUP}
    PRIQTY -1 SECQTY -1
    MAXPARTITIONS ${MAXPARTITIONS}
    FREEPAGE 0 PCTFREE 10
    TRACKMOD NO
    SEGSIZE 32
    BUFFERPOOL BP1
    LOCKSIZE ${LOCKSIZE}
    LOCKMAX 0
    CCSID  UNICODE;

--
-- T A B L E
--
CREATE TABLE BPM_PROCESS_RECORD
    (GID					CHAR(32)	NOT NULL,
	PARENT_GID			CHAR(32),
	ORIGINATOR			VARCHAR(50),
	ORIGINATION_DATE	TIMESTAMP,
	END_DATE			TIMESTAMP,
	BUSINESS_ID			VARCHAR(100),	
	PRIMARY KEY (GID)
    )
    IN ${DBNAME}.DPSTS820
    DATA CAPTURE ${DB2TBDATACAPTURE}
    CCSID      UNICODE
    ;
--
-- I N D E X 1
--
CREATE UNIQUE INDEX X1820 ON
    BPM_PROCESS_RECORD
    (GID)
    USING STOGROUP ${STOGROUP}
    PRIQTY -1 SECQTY -1
    FREEPAGE 0 PCTFREE 10
    CLUSTER
    NOT PADDED
    BUFFERPOOL BP2
    PIECESIZE 2 G
    ;
--
-- I N D E X 2
--
CREATE UNIQUE WHERE NOT NULL INDEX X2820 ON
    BPM_PROCESS_RECORD
    (BUSINESS_ID)
    USING STOGROUP ${STOGROUP}
    PRIQTY -1 SECQTY -1
    FREEPAGE 0 PCTFREE 10
    NOT CLUSTER
    NOT PADDED
    BUFFERPOOL BP2
    PIECESIZE 2 G
    ;	
	
-- T A B L E S P A C E
--
--
--
CREATE TABLESPACE DPSTS821
    IN ${DBNAME}
    USING STOGROUP ${STOGROUP}
    PRIQTY -1 SECQTY -1
    MAXPARTITIONS ${MAXPARTITIONS}
    FREEPAGE 0 PCTFREE 10
    TRACKMOD NO
    SEGSIZE 32
    BUFFERPOOL BP1
    LOCKSIZE ${LOCKSIZE}
    LOCKMAX 0
    CCSID  UNICODE;

--
-- T A B L E
--
CREATE TABLE BPM_PROCESS_PARAMETER
    (GID				CHAR(32)		NOT NULL,
	NAME				CHAR(32)		NOT NULL,
	TRACEABLE   		SMALLINT 		NOT NULL,
	VALUE				VARCHAR (256),		
	PRIMARY KEY (GID, NAME)
    )
    IN ${DBNAME}.DPSTS821
    DATA CAPTURE ${DB2TBDATACAPTURE}
    CCSID      UNICODE
    ;
--
-- I N D E X 1
--
CREATE UNIQUE INDEX X1821 ON
    BPM_PROCESS_PARAMETER
    (GID, NAME)
    USING STOGROUP ${STOGROUP}
    PRIQTY -1 SECQTY -1
    FREEPAGE 0 PCTFREE 10
    CLUSTER
    NOT PADDED
    BUFFERPOOL BP2
    PIECESIZE 2 G
    ;


ALTER TABLE BPM_PROCESS_PARAMETER ADD CONSTRAINT 
BPM_PROCESS_PARAMETER_FK FOREIGN KEY (GID) 
REFERENCES BPM_PROCESS_RECORD ON DELETE CASCADE;


GRANT SELECT, UPDATE, DELETE, INSERT ON BPM_PROCESS_RECORD TO ${GRANTTABMUT} ;
GRANT SELECT, UPDATE, DELETE, INSERT ON BPM_PROCESS_PARAMETER TO ${GRANTTABMUT};

GRANT SELECT ON BPM_PROCESS_RECORD TO ${GRANTTABREAD} ;
GRANT SELECT ON BPM_PROCESS_PARAMETER TO ${GRANTTABREAD};

COMMIT;
